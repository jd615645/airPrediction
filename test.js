let sites = [{"siteName":"三義站","w0":1.1910307381135397,"w1":[0.09250601280152562,-0.1757184805923165,0.16343843320604282,-0.12031197534457531,0.18294313125835443,-0.268113383599836,0.45126598355519215,-0.6135086723186381,1.2732441037031967],"lat":24.382942,"lon":120.758833},{"siteName":"三重站","w0":2.9597130827245053,"w1":[-0.10407986024132257,0.06591111807138172,0.22765140994275093,-0.4181839591674078,0.11914875830478303,0.5842596540571352,-0.6997570084635947,0.11064041957298622,1.0538355877485601],"lat":25.072611,"lon":121.493806},{"siteName":"中壢站","w0":1.7989373346729316,"w1":[-0.05512612925890508,0.00864310886889924,0.26528856962785746,-0.36002528097499825,0.062231102479294816,0.6957451998268114,-0.7714458255096563,0.025257808208082218,1.0835969379626882],"lat":24.953278,"lon":121.221667},{"siteName":"中山站","w0":2.982042027738789,"w1":[-0.0936388668892687,-0.0007807468893942793,0.379906879842035,-0.44001127645357646,-0.010360119715804736,0.6926655658778667,-0.7940936851194337,0.08948398605821731,1.1082730323504477],"lat":25.062361,"lon":121.526528},{"siteName":"二林站","w0":1.1984525899080722,"w1":[0.028726093572105788,-0.16418523139450586,0.4019742108383616,-0.33226071725862155,-0.20882265879979758,0.8507197799299873,-0.8083466557853738,-0.1431854216541537,1.3534171056583442],"lat":23.925175,"lon":120.409653},{"siteName":"仁武站","w0":1.8983052713395487,"w1":[-0.02395785980929029,-0.058369615936218366,0.3588938924523496,-0.3901376553813178,-0.0362970990510318,0.7276727058422194,-0.6863218846175304,-0.1377176940516588,1.220545862155234],"lat":22.689056,"lon":120.332631},{"siteName":"冬山站","w0":1.3839351558791027,"w1":[0.046253172338239994,-0.09742190258340422,0.21250498862300884,-0.33048039645649857,0.3819960076218363,-0.5018754449077012,0.7857936125284534,-0.8363220077331427,1.280509601226533],"lat":24.632203,"lon":121.792928},{"siteName":"前金站","w0":2.546335306885048,"w1":[-0.08495769035401718,0.12529870570472185,0.2058801270064894,-0.3820942602225086,0.13240532782364858,0.5774553651566499,-0.8165953490398676,0.11684893062151742,1.0813577588450938],"lat":22.632567,"lon":120.288086},{"siteName":"前鎮站","w0":1.7749772327232591,"w1":[0.14070784951185003,-0.07137270713659821,-0.021420085187004882,0.09436314871960563,-0.04519117101485185,0.027811158442713167,-0.0025052557731797473,-0.18264841236066054,1.0239965812851697],"lat":22.605386,"lon":120.307564},{"siteName":"南投站","w0":1.623642091791524,"w1":[0.05307385677728449,-0.21490141567972,0.39507667089515747,-0.5794645317936983,0.6353136953513009,-0.7024308361379045,0.9678128701715772,-1.2862170725411457,1.6680811177975037],"lat":23.913,"lon":120.685306},{"siteName":"古亭站","w0":1.8555942017879588,"w1":[0.03935868520248515,-0.041712678263109204,0.12734614813445275,-0.23253777469228354,0.0660535884077354,0.46743941617265095,-0.6097089659525969,0.03870425835134916,1.1207396726865788],"lat":25.020608,"lon":121.529556},{"siteName":"善化站","w0":1.8628596625376055,"w1":[-0.04074176293320792,0.03895537059544446,0.28749553977597425,-0.3981629269111654,-0.051482414112647326,0.6623784648589477,-0.7522860533707554,-0.03478480488977362,1.2906952489940058],"lat":23.115097,"lon":120.297142},{"siteName":"嘉義站","w0":2.0833611978960533,"w1":[0.027009891724955448,-0.0743451821013125,0.32773065840286014,-0.3705432364525209,-0.0799539007767941,0.6999988465842858,-0.6980382258733004,-0.05935047403342096,1.2049010876346],"lat":23.462778,"lon":120.440833},{"siteName":"埔里站","w0":0.5218854218760036,"w1":[0.09511739287819418,-0.1343954598471569,0.22058860115381412,-0.34609166393008095,0.4545559698402364,-0.5742614810858686,0.85048549130306,-1.0714037194012491,1.469827143864054],"lat":23.968842,"lon":120.967903},{"siteName":"基隆站","w0":0.3345077735526232,"w1":[-0.04668549547302529,0.15034681810750972,-0.08978090229914543,-0.12596515746007417,0.06877252266654715,0.08269033381158154,0.050710726475848386,0.08404369229624185,0.7877173794759796],"lat":25.129167,"lon":121.760056},{"siteName":"士林站","w0":1.682018521511882,"w1":[-0.10916035961098962,0.05494296334445786,0.24495015565709882,-0.40862896763502,0.04188957342824989,0.6657786774901552,-0.7622761903884034,0.07323229372707817,1.1668057860605576],"lat":25.105417,"lon":121.515389},{"siteName":"大同站","w0":2.9093652110876604,"w1":[-0.140761925208971,0.12693682705081183,0.31819931463687834,-0.48766754058509654,0.11542175832583769,0.5085492253051871,-0.7053417099394742,0.19743408696004597,1.011520499683128],"lat":25.0632,"lon":121.513311},{"siteName":"大寮站","w0":2.783851610588613,"w1":[0.009320841216978666,0.05564495370685196,-0.060302271545430775,0.04372301340693475,-0.005460715562030788,0.04347961983548365,0.04561080352811936,-0.2643328634369468,1.0207124627350304],"lat":22.564136,"lon":120.425311},{"siteName":"大里站","w0":2.5200785082761143,"w1":[0.004672771131832649,-0.09712692371027384,0.28598529804496103,-0.32571021421110635,0.00750234437914013,0.6108856283489362,-0.7039793398850908,0.049342187677095216,1.1367094700111777],"lat":24.099611,"lon":120.677689},{"siteName":"安南站","w0":1.6241741714978453,"w1":[-0.040727617553664566,-0.028434664175482516,0.32135928815114234,-0.37715202531923403,-0.12074612265054561,0.850092079874957,-0.8662381576093552,-0.06087070018323046,1.2872475720719299],"lat":23.048333,"lon":120.218333},{"siteName":"宜蘭站","w0":0.549059384859337,"w1":[0.09521419015719997,-0.11717643193711616,0.09117326995385311,-0.1420075359620624,0.26762816205951934,-0.38983485461512346,0.6512463649162715,-0.7653444719353212,1.2893522700713693],"lat":24.747917,"lon":121.746394},{"siteName":"小港站","w0":3.136110858709518,"w1":[-0.04602671644651108,0.0779369254488202,0.09086577766996336,-0.1958850016506637,0.056067997539549844,0.3939117983354507,-0.44965045126811476,-0.03949264027454555,1.0632887901315933],"lat":22.565833,"lon":120.337736},{"siteName":"屏東站","w0":2.515638080695645,"w1":[-0.05591652615596222,0.037578643565907066,0.24436342551192974,-0.42090441058766914,0.08806802389552656,0.5871850149725832,-0.6752616534902134,0.0437848602340989,1.1132055628774393],"lat":22.673081,"lon":120.488033},{"siteName":"崙背站","w0":1.5809861566824637,"w1":[-0.060720320486362014,-0.029251888580747454,0.4314498346679808,-0.532279541224626,-0.11802559663842004,0.992514876300518,-0.9200418214230609,-0.1977698216177968,1.403963996730212],"lat":23.757547,"lon":120.348742},{"siteName":"左營站","w0":2.614016247640457,"w1":[-0.03742768685508683,0.009929312198144302,0.31088297879632165,-0.3921268546988666,0.01116036836021389,0.6551873344376292,-0.7481687299009996,0.01895711195971516,1.1278577472346158],"lat":22.674861,"lon":120.292917},{"siteName":"平鎮站","w0":1.7815859560772012,"w1":[-0.09041089486744947,0.052887859598580556,0.2384774492380399,-0.3763482710304843,0.058433140831841604,0.5640726971764579,-0.7130417203233955,0.20003513477818555,1.0129929857351274],"lat":24.952786,"lon":121.203986},{"siteName":"彰化站","w0":1.8604160938272862,"w1":[-0.06592372109191502,0.02310083980259492,0.35095795345511455,-0.4700793538865185,0.03137587351137337,0.6417947269698774,-0.7709245589519609,-0.009513236213645873,1.2244591237784181],"lat":24.066,"lon":120.541519},{"siteName":"復興站","w0":0.2973851407382213,"w1":[0.15028747111497576,-0.32521954974223505,0.5202458137792096,-0.5602871094147254,0.6940522154484187,-0.7660911604125673,0.8392266100268962,-1.1744529802185453,1.6084878761143662],"lat":22.608711,"lon":120.312017},{"siteName":"忠明站","w0":2.458370933381957,"w1":[-0.08923806357846156,-0.06192196263499555,0.38898572546419385,-0.4107120238194535,-0.00801183184303747,0.6124732854030186,-0.6646942982104421,0.07305843699613608,1.1230305610172377],"lat":24.151958,"lon":120.641092},{"siteName":"恆春站","w0":0.75598608595954,"w1":[0.011238409219895454,-0.036587136215464916,-0.058067779468736126,0.1061295713551956,-0.04884692053290184,0.009444679815466414,0.12057907532988386,0.12868975522273146,0.6890161085404333],"lat":21.958069,"lon":120.788928},{"siteName":"斗六站","w0":2.160392466670338,"w1":[-0.06419548648610078,0.0012710168724882065,0.31225816725000727,-0.4635190066059895,0.0798924159291668,0.6840764805204915,-0.7919463305217771,0.04582291119113653,1.162875093156816],"lat":23.711853,"lon":120.544994},{"siteName":"新店站","w0":1.635868024384525,"w1":[0.04609696520494777,-0.06838021242392006,0.14434117830744442,-0.36463136600093005,0.5044690931603244,-0.6541327895994243,0.8737941321338596,-1.1444799085032606,1.618249280176583],"lat":24.977222,"lon":121.537778},{"siteName":"新港站","w0":2.1419850754686323,"w1":[-0.039818789713433125,-0.06193682197550232,0.3230827637309751,-0.30535307540250145,-0.08653702614490742,0.5976418793074262,-0.6485247923916605,-0.05436810755125799,1.2242143345099399],"lat":23.554839,"lon":120.345531},{"siteName":"新營站","w0":1.8548068686296837,"w1":[-0.13301756665219336,0.018851600117677392,0.37544668281974336,-0.383463096626622,-0.0615252169980707,0.6589502120368681,-0.7386866428807117,-0.016209874540072458,1.2503957150412852],"lat":23.305633,"lon":120.31725},{"siteName":"新竹站","w0":1.2047571984202357,"w1":[0.0623504574991814,-0.15234822138717788,0.23728677245027843,-0.327680818322854,0.4481813937795593,-0.635716916621826,0.8984907578455672,-1.2257583705753137,1.6592948762210835],"lat":24.805619,"lon":120.972075},{"siteName":"新莊站","w0":0.5915402717432023,"w1":[0.12068683974662198,-0.25786444996574553,0.36068744148075277,-0.39656242036462636,0.4469884250213935,-0.5776772171560811,0.77154354674493,-1.004622657302845,1.5159260206812248],"lat":25.037972,"lon":121.4325},{"siteName":"朴子站","w0":2.511073136043386,"w1":[-0.0799300753805898,0.006723315918448047,0.32041397565456803,-0.410263150953189,0.013772980693396358,0.7288327958207097,-0.8820193395852725,-0.015831184074805826,1.2702736798121788],"lat":23.465308,"lon":120.24735},{"siteName":"松山站","w0":2.4334493723940476,"w1":[-0.04946859158554347,-0.0013475871299646336,0.33073619871120763,-0.5279208962056263,0.12740144341132534,0.6075569111965771,-0.8374817055781386,0.15971205361510954,1.1320502803175096],"lat":25.05,"lon":121.578611},{"siteName":"林口站","w0":1.8866407660187754,"w1":[0.06663065586087599,-0.12567711989935,0.25733819768057725,-0.47317674994597836,0.5998143262331007,-0.690762898251013,0.8440885542345238,-1.0356581571098518,1.494184947071258],"lat":25.07857,"lon":121.365703},{"siteName":"林園站","w0":2.695963363114359,"w1":[-0.0007243108863106295,-0.047856553183094674,0.04738810022253921,0.15157977415691987,0.06491061432989109,0.0035142490019252487,0.03414565157499283,-0.022927148385582033,0.7246281321801422],"lat":22.4795,"lon":120.41175},{"siteName":"桃園站","w0":1.6645814177496447,"w1":[-0.11245201390511723,0.030355604342414633,0.4057488066314245,-0.5068644795763426,-0.05806019905124102,0.777034926235053,-0.7798094706749872,0.005709652655086647,1.1859131320270224],"lat":24.994789,"lon":121.319964},{"siteName":"楠梓站","w0":2.5863272377258646,"w1":[0.012399206125365256,-0.032071025933808395,0.31791865310736256,-0.37569189929329483,-0.0035406976226419057,0.644223473167062,-0.715935767083458,-0.005358125047738228,1.1190360542028879],"lat":22.733667,"lon":120.328289},{"siteName":"橋頭站","w0":1.7437676851266595,"w1":[0.015811718766395588,0.004814167218825438,0.04594123003588903,0.0814942141175617,-0.08920259462474149,0.023976151990260666,0.11228271048872493,-0.36318721452741676,1.103879815419926],"lat":22.757506,"lon":120.305689},{"siteName":"汐止站","w0":0.9270155285927295,"w1":[0.07496227545791223,-0.19942473447139172,0.2918714636604182,-0.34808873172295945,0.41158381872094,-0.4697942064138216,0.6331921590342765,-0.9354659580936279,1.5093365601477085],"lat":25.065669,"lon":121.6408},{"siteName":"沙鹿站","w0":1.4372948572726116,"w1":[0.0234012252994515,-0.10138867753199429,0.26446434336870833,-0.42526813349306414,0.4881842707086106,-0.595911276918789,0.8894199654862183,-1.1870727412285953,1.5815314567972165],"lat":24.225628,"lon":120.568794},{"siteName":"淡水站","w0":0.808445492128353,"w1":[0.09232185391164449,-0.16968385301463462,0.2085400159737619,-0.3316414851168017,0.4934815755581362,-0.5855130223811674,0.7827189876495808,-1.0438209064107717,1.5324965239045945],"lat":25.1645,"lon":121.449239},{"siteName":"湖口站","w0":1.0818099177249572,"w1":[0.08036544205015496,-0.18629862672540706,0.3077959243414182,-0.3579331858294404,0.4283998540447548,-0.50772530670467,0.6159144371799047,-0.7340953455738831,1.2957360792462678],"lat":24.900142,"lon":121.038653},{"siteName":"潮州站","w0":2.355726723373447,"w1":[-0.06875630914310676,0.08290337693382416,0.2942430257364953,-0.44130501808000044,0.04436873206434558,0.6782862822930332,-0.7560677197867056,0.026529858816957866,1.137087651566084],"lat":22.523108,"lon":120.561175},{"siteName":"竹山站","w0":0.919018434277266,"w1":[0.03806244458996415,-0.16211699055666517,0.31501768210532466,-0.42912312511410416,0.5491971010643335,-0.7431704144564717,0.9122584047181921,-1.0581991351271947,1.5401082537319548],"lat":23.756389,"lon":120.677306},{"siteName":"竹東站","w0":0.8888189692040029,"w1":[0.004557283223287192,-0.028354880332114862,0.15734542353880218,-0.26347334365206476,0.3819901283457829,-0.4823092591705067,0.7322718029797537,-0.8927815773814783,1.3808076049097056],"lat":24.740644,"lon":121.088903},{"siteName":"線西站","w0":1.7249098695465968,"w1":[0.05119771744108094,-0.21544939940429414,0.42563300822926375,-0.5229343911340805,0.7214651305994452,-0.8838176654822363,1.0618330419151552,-1.262945646648082,1.5557673278643662],"lat":24.131672,"lon":120.469061},{"siteName":"美濃站","w0":1.4355374862767363,"w1":[0.054830042118404324,-0.009952888805917881,0.03095671600876046,0.09025380620105922,-0.006916162309158508,-0.1459095067953733,0.21101108234831306,0.0647924873370406,0.6557943095021936],"lat":22.883583,"lon":120.530542},{"siteName":"臺南站","w0":1.2781359215825034,"w1":[-0.07290132389271708,0.032260189997630806,0.2972940108813546,-0.5025629909484866,0.09033933024712335,0.7098538280433715,-0.8564789288203432,-0.0712851892010657,1.3451183541680092],"lat":22.984581,"lon":120.202617},{"siteName":"臺東站","w0":0.6411753384914078,"w1":[0.12432449234423193,-0.1895598141746896,0.22007904778109894,-0.30443672330402527,0.41730054887009843,-0.45911559036533733,0.6700291917968766,-0.7624932561841543,1.2231438884958623],"lat":22.755358,"lon":121.15045},{"siteName":"臺西站","w0":1.1660079294006813,"w1":[0.08852062201968193,-0.21395093106399318,0.34751265750796195,-0.5370832453172212,0.8036456061505948,-1.0023308778990592,1.2372135560596411,-1.4999098362509875,1.7182986849082962],"lat":23.717533,"lon":120.202842},{"siteName":"花蓮站","w0":1.0310502554378793,"w1":[0.07145657896549905,-0.08684338005595324,0.08517098393001607,-0.1922247975979024,0.3894719592646683,-0.42581109156529856,0.6323261659895589,-0.6603322354681785,1.1131045715910164],"lat":23.971306,"lon":121.599769},{"siteName":"苗栗站","w0":1.647679247495752,"w1":[0.08475400708169796,-0.0430243359570083,-0.06364936297267504,0.05723653068966988,0.0016034521921289985,0.06864063051181035,0.0743175956703233,-0.303284917893637,1.0859867477436538],"lat":24.565269,"lon":120.8202},{"siteName":"菜寮站","w0":0.8718439293026883,"w1":[0.08325248736595131,-0.23492629378169372,0.34711051695606276,-0.48639582473239024,0.6823212919324662,-0.8168376160931143,1.0026932111859441,-1.2400577302383256,1.6396813885783363],"lat":25.06895,"lon":121.481028},{"siteName":"萬華站","w0":2.2050479483375156,"w1":[-0.09627384678785554,-0.0018275214797394135,0.37975202773967176,-0.5137163734609017,0.10683896919609123,0.7207563695018376,-0.8923884800307504,0.10099830744652473,1.1743637688780488],"lat":25.046503,"lon":121.507972},{"siteName":"萬里站","w0":0.764163316570162,"w1":[0.07726988128830689,-0.15565533350597913,0.21868718781610313,-0.3513556722417071,0.4614997347322025,-0.6072458235597255,0.8237085056987522,-0.9053177341640043,1.4156472381609846],"lat":25.179667,"lon":121.689881},{"siteName":"西屯站","w0":2.0175215563448177,"w1":[-0.07983518174123522,-0.04646226900272388,0.30963965993877696,-0.37088855580862634,0.05491079557780111,0.61152097008226,-0.7890399947124248,0.0457769987889655,1.2168324761243525],"lat":24.162197,"lon":120.616917},{"siteName":"觀音站","w0":0.7035921039857129,"w1":[0.018965006964895042,-0.06205151109668003,0.13197098720556708,-0.23234014217055668,0.03841755403198254,0.4629983521225627,-0.6371987115915148,0.11505626395444528,1.1295033137876989],"lat":25.035503,"lon":121.082761},{"siteName":"豐原站","w0":1.8395366518066467,"w1":[-0.13826916261328315,0.1242663176972661,0.33657140127317003,-0.5110299580305288,0.17259512908732233,0.5374421260610527,-0.7431530535646836,0.0768196266860394,1.1370900904093666],"lat":24.256586,"lon":120.741711},{"siteName":"金門站","w0":0.5428530301359302,"w1":[0.06758991001498083,-0.23683584307784436,0.44951445763259495,-0.6105745663464861,0.9300389875881115,-1.2629426897259681,1.4364517644083965,-1.7235585310788084,1.9343418466380748],"lat":24.432133,"lon":118.312256},{"siteName":"關山站","w0":0.530922614379584,"w1":[0.06833126533868779,-0.0888322876116143,0.18400275714665498,-0.31222636594521036,0.33857600145742556,-0.39260983985769904,0.6924907279150923,-0.6867251979995933,1.1576195581653224],"lat":23.045083,"lon":121.161933},{"siteName":"陽明站","w0":0.7619942406098321,"w1":[-0.03823401165038676,0.07235968950127836,0.0051997697889310385,-0.00908607134695738,0.07274480848366975,-0.10165642860299262,0.029845180558923393,0.10611828964553822,0.8590689557688689],"lat":25.182722,"lon":121.529583},{"siteName":"頭份站","w0":0.6736320594662182,"w1":[0.03824101178328575,0.003545766399012107,0.13083539248857312,-0.3720746406632594,0.6765284179209584,-0.9580501501643129,1.109970056370939,-1.28035492865222,1.6272890837869571],"lat":24.696969,"lon":120.898572},{"siteName":"馬公站","w0":0.36473360736644267,"w1":[0.016835706970299423,-0.01784109826173602,0.06304268199684443,-0.1456417588441602,0.2729257177526992,-0.3804956167316278,0.6428084639787515,-0.7949849304864272,1.3262108467580167],"lat":23.569031,"lon":119.566158},{"siteName":"馬祖站","w0":1.1642818785374658,"w1":[0.06816866349094068,-0.26222967283270665,0.3812129277572327,-0.4864414636002934,0.5675272162367697,-0.6917355389201284,0.9618614605580781,-1.180812103769774,1.6159190537149082],"lat":26.160469,"lon":119.949875},{"siteName":"鳳山站","w0":2.821655308724491,"w1":[-0.08037791937869464,0.046189640981596114,0.2965778654551902,-0.39731881405662206,0.01831467894266335,0.6415111795538303,-0.7358048504732372,-0.04653648905116628,1.1958516794648886],"lat":22.627392,"lon":120.358083},{"siteName":"麥寮站","w0":0.9078267978883261,"w1":[0.15392465800636354,-0.27058934313638755,0.3031782503702207,-0.4236487596713256,0.726431304505623,-1.0476339710662566,1.356170732937868,-1.611699560388857,1.7679717807960993],"lat":23.753506,"lon":120.251825},{"siteName":"龍潭站","w0":2.165471507894477,"w1":[-0.05019249541151052,0.037088725590199656,0.22751413459933637,-0.3231182327053568,0.02820968290450121,0.6013864605816783,-0.762943879988261,0.13721678670250198,1.0415622760806778],"lat":24.863869,"lon":121.21635}]

let local = [
  {
    "SiteName": "taichung42",
    "LatLng": {
      "lat": 24.152,
      "lng": 120.694
    },
    "SiteGroup": "AirBox",
    "Data": {
      "pm25": 65,
      "temp": 31.62,
      "humi": 69
    },
    "time": "2017-04-08T15:46:02Z",
    "uniqueKey": "74DA3895C560"
  }
]
local.forEach((val, key) => {
  // console.log(val)
  lat = val['LatLng']['lat']
  lon = val['LatLng']['lng']

  let closeSite = -1
  let closeDist = 10000

  sites.forEach((val, key) => {
    siteLat = val['lat']
    siteLon = val['lon']
    dist = getDistance(lat, lon, siteLat, siteLon)
    if (dist < closeDist) {
      closeDist = dist
      closeSite = key
    }
  })
  console.log(closeDist)
  console.log(sites[closeSite])
  w0 = sites[closeSite]['w0']
  w1 = sites[closeSite]['w1']
})

function getDistance(lat1, lon1, lat2, lon2) {
  var R = 6371; // Radius of the earth in km
  var dLat = deg2rad(lat2-lat1);  // deg2rad below
  var dLon = deg2rad(lon2-lon1); 
  var a = 
    Math.sin(dLat/2) * Math.sin(dLat/2) +
    Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * 
    Math.sin(dLon/2) * Math.sin(dLon/2)
    ; 
  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
  var d = R * c; // Distance in km
  return d;
}

function deg2rad(deg) {
  return deg * (Math.PI/180)
}
